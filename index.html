<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>abrat</title>
<script src="./vendor/jquery.js"></script>
<link rel="stylesheet" type="text/css" href="./vendor/bootstrap.css" />
<script>
    var PATCH = {};
    var $ABRAT = {
        ns : PATCH, //defaults to $ABRAT 
        //cookieName : '', //defaults to abtests
        names : {
            cl: 'primary vs info',
            sh: 'large vs small'
        },
        experiments : 'cl3-sh4-ba4' // what experiemnts are running on page
    };
</script>
</head>

<body id="index" class="home">

    <!-- for simple --> 
    <script src="./src/abrat.js"></script>

    <!-- for optimized pages one less http request  -->
    <script>
        (function(){var b=$ABRAT.ns||$ABRAT,h=$ABRAT.cookieName||"abtests",i=$ABRAT.experiments;if(!String.prototype.trim)String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};var j=function(a){var b=null;if(document.cookie&&""!=document.cookie)for(var c=document.cookie.split(";"),g=0;g<c.length;g++){var e=c[g].trim();if(e.substring(0,a.length+1)==a+"="){b=decodeURIComponent(e.substring(a.length+1).replace(/\+/g," "));break}}return b};b.ab=function(){var a=function(c){var b={};if(c){var c=
        c.split("-"),a;for(a in c)c.hasOwnProperty(a)&&(b[c[a].slice(0,-1)]=parseInt(c[a].slice(-1),10))}return b},b="";return{running_experiments:a(i),variants:a(j(h)),encode:function(c){var a="",b;for(b in c)c.hasOwnProperty(b)&&(a+=b+c[b]+"-");return a.slice(0,-1)},switcher:function(b){var a=Math.ceil(10*Math.random());arguments.length||(b=5);return b<=a?0:1},writeRules:function(a){b+="body."+a+"-a ."+a+"-b { display: none !important }";b+="body."+a+"-b ."+a+"-a { display: none !important }"},getCSSrules:function(){return document.createTextNode(b)},
        getCssText:function(){return b},report:function(a){var b={},e;for(e in d)d.hasOwnProperty(e)&&(b[e]=["a","b"][d[e]]);return a(b)},attachHandlers:function(a){for(var b in d)d.hasOwnProperty(b)&&a(b+"-"+["a","b"][d[b]])}}}();for(var a in b.ab.running_experiments)if(b.ab.running_experiments.hasOwnProperty(a)){var f,d=b.ab.variants;"undefined"!==typeof d[a]?f=["a","b"][d[a]]:(f=["a","b"][b.ab.switcher(b.ab.running_experiments[a])],d[a]=["a","b"].indexOf(f));document.body.className+=" "+a+"-"+f;b.ab.writeRules(a)}(function(a,
        b){document.cookie=a+"="+encodeURIComponent(b)})(h,b.ab.encode(b.ab.variants));a=document.createElement("style");a.setAttribute("type","text/css");a.styleSheet?a.styleSheet.cssText=b.ab.getCssText():a.appendChild(b.ab.getCSSrules());document.getElementsByTagName("head")[0].appendChild(a)})();
    </script>

    <script>
        PATCH.ab.attachHandlers(function(sel){
            $(function(){
                // for older than 1.7 use
                //$('body .' + sel).delegate('a','mousedown', function() {
                $('body .' + sel).on('mousedown', 'a', function(e) {
                    // report that abrat element was clicked
                    _gaq.push(['_trackEvent', sel, 'clicked']);
                });
                // just for debugging 
                $('body .' + sel).on('click', 'a', function(e) {
                    e.preventDefault();
                });
            });
        });
    </script>
    <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-565491-13']);
    // report abrat stuff to google analytics
                             // | which custom var                // | scope visitor level
    var experiments = PATCH.ab.report(function(abhash){
        return $.map(abhash, function(v,k){return k+"-"+v}).join(" | ");
    });
    _gaq.push(['_setCustomVar', 1, 'Experiments', experiments, 1]);
    // end abrat stuff
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    </script>

    <div class="container">
        <img src="img/gray-rat.jpg" />
        <h1>ABrat <small>a cache tolerant ab switch</small></h1>

        <h2>Sample Experiments</h2>
        <div class="row">
            <div class="span-6 cl-a">
                <p>Testing info button:
                <a class="btn large info" href="">click</a>
                </p>
            </div>

            <div class="span-6 cl-b">
                <p>Testing primary button:
                <a class="btn large primary" href="">click</a>
                </p>
            </div>

            <div class="span-6 ba-a">experiment ba a
                <a class="btn large info" href="">link</a>
            </div>
            <div class="span-6 ba-b">experiment ba b
                <a class="btn small info" href="">link</a>
            </div>
        </div>
    </div>
</body>
</html>
